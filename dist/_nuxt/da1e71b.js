(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{145:function(e,t,o){"use strict";o.r(t);var n={components:{ProgressNav:o(146).default},data:function(){return{doneClass:"text-white bg-brand-blue-600",notDoneClass:"text-gray-500"}}},r=o(17),component=Object(r.a)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"flex justify-center w-full px-3 space-x-0"},[o("ProgressNav",{attrs:{first:"",to:"/guests",done:e.$store.state.guests_done}},[e._v("\n        1. "),o("span",{staticClass:"hidden md:inline-block"},[e._v(" Guests")])]),e._v(" "),o("ProgressNav",{attrs:{to:"/availability",done:e.$store.state.availability_done}},[e._v("\n        2. "),o("span",{staticClass:"hidden md:inline-block"},[e._v(" Availability")])]),e._v(" "),o("ProgressNav",{attrs:{to:"/extras",done:e.$store.state.availability_done}},[e._v("\n        3. "),o("span",{staticClass:"hidden md:inline-block"},[e._v(" Extras")])]),e._v(" "),o("ProgressNav",{attrs:{to:"/profile",done:e.$store.state.profile_done}},[e._v("\n        4. "),o("span",{staticClass:"hidden md:inline-block"},[e._v(" Profile")])]),e._v(" "),o("ProgressNav",{attrs:{to:"/policies",done:e.$store.state.policy_done}},[e._v("\n        5. "),o("span",{staticClass:"hidden md:inline-block"},[e._v(" Policies")])]),e._v(" "),o("ProgressNav",{attrs:{last:"",to:"/summary"}},[e._v("\n        6. "),o("span",{staticClass:"hidden md:inline-block"},[e._v(" Payment")])])],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{ProgressNav:o(146).default})},146:function(e,t,o){"use strict";o.r(t);o(50),o(65);var n={props:{to:{type:String,default:"/"},first:{type:Boolean,default:!1},last:{type:Boolean,default:!1},done:{type:Boolean,default:!1}},computed:{current:function(){return this.$route.path.includes(this.to)},classesName:function(){if(this.current){if(this.last)return"p-lb-e font-bold text-brand-blue";if(this.first)return"p-lb-s font-bold text-brand-blue";if(!this.first)return"p-lb-m font-bold text-brand-blue"}if(this.done){if(this.done){if(this.last)return"p-b-e text-white";if(this.first)return"p-b-s text-white";if(!this.first)return"p-b-m text-white"}}else{if(this.last)return"p-w-e text-gray-400";if(this.first)return"p-w-s text-gray-400";if(!this.first)return"p-w-m text-gray-400"}}}},r=(o(268),o(17)),component=Object(r.a)(n,(function(){var e=this.$createElement;return(this._self._c||e)("nuxt-link",{staticClass:"flex items-center justify-center h-16 w-44 prog",class:this.classesName,attrs:{to:this.to}},[this._t("default")],2)}),[],!1,null,null,null);t.default=component.exports},150:function(e,t,o){"use strict";var n=o(5),r=o(214),c=o.n(r);n.default.use(c.a)},151:function(e,t,o){"use strict";var n=o(5),r=o(215),c=o.n(r);o(317),n.default.use(c.a)},152:function(e,t,o){"use strict";var n=o(216);t.a=function(e){var t=e.store;new n.a({}).plugin(t)}},153:function(e,t,o){"use strict";var n=o(5),r=o(217),c=o.n(r),d=o(218),l=o.n(d),f=c.a.start({apiKey:"65de2f1bc2305f10771312d8f9ff059e",plugins:[new l.a]});n.default.use(f),t.a=function(e,t){t("bugsnag",f)}},194:function(e,t,o){var content=o(269);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(53).default)("c60b279e",content,!0,{sourceMap:!1})},195:function(e,t,o){var content=o(289);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(53).default)("4a0aa83f",content,!0,{sourceMap:!1})},196:function(e,t,o){var content=o(293);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(53).default)("56b15182",content,!0,{sourceMap:!1})},220:function(e,t,o){"use strict";var n=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"my-10 text-center"},[t("img",{staticClass:"w-32 mx-auto md:w-40",attrs:{src:o(222)}})])}],r={middleware:["clear"],components:{TopProgressBar:o(145).default},created:function(){console.log("Initial loadings"),this.$store.dispatch("loadRooms"),this.$store.dispatch("loadPolicies"),this.$store.dispatch("extras/getSpecialDrinks"),this.$store.dispatch("extras/getSpecialDecorations"),this.$store.dispatch("extras/getLookoutOptions"),this.$store.dispatch("extras/getSpecialMassages"),this.$store.dispatch("extras/getQuadbikeOptions"),this.$store.dispatch("extras/getMostPrices")}},c=(o(288),o(17)),component=Object(c.a)(r,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"flex min-h-screen bg-white"},[t("main",{staticClass:"flex-1 w-full pb-48 overflow-auto beach"},[this.$store.state.editMode?t("UpdateBookingBanner"):this._e(),this._v(" "),this._m(0),this._v(" "),t("TopProgressBar"),this._v(" "),t("div",{staticClass:"static z-20 py-6 mx-auto mt-6 md:mt-12 max-w-7xl"},[t("Nuxt",{attrs:{"keep-alive":""}})],1),this._v(" "),t("div",{staticClass:"fixed bottom-0 z-10 w-full pointer-events-none h-80 bottom-beach"})],1)])}),n,!1,null,null,null);t.a=component.exports;installComponents(component,{UpdateBookingBanner:o(321).default,TopProgressBar:o(145).default})},221:function(e,t,o){"use strict";o(292);var n=o(17),component=Object(n.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("Nuxt")],1)}),[],!1,null,null,null);t.a=component.exports},222:function(e,t,o){e.exports=o.p+"img/logo_big.5a27305.jpg"},224:function(e,t,o){o(225),e.exports=o(226)},244:function(e,t,o){"use strict";o.r(t);var n=o(36),r=o(48);t.default=function(e){var t=e.store,o=e.redirect,c=t.state.lastUpdate;if(c instanceof Date||(c=Object(r.a)(c)),null!=c){var d=Object(n.a)(new Date,c);console.log("Update expiry"),console.log(c),console.log(new Date),console.log(d),d>3600&&(t.commit("RESET_STORE"),t.commit("extras/RESET_STORE"),o("/")),t.commit("UPDATE_EXPIRY",new Date)}else t.commit("UPDATE_EXPIRY",new Date)}},264:function(e,t,o){var content=o(265);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(53).default)("42059d06",content,!0,{sourceMap:!1})},265:function(e,t,o){var n=o(52),r=o(144),c=o(266),d=o(267);t=n(!1);var l=r(c),f=r(d);t.push([e.i,'@font-face{font-family:"MaisonNeue";src:local("MaisonNeue"),url('+l+') format("truetype")}@font-face{font-family:"MaisonNeue";src:local("MaisonNeue"),url('+f+') format("truetype");font-weight:700}',""]),e.exports=t},266:function(e,t,o){e.exports=o.p+"fonts/MaisonNeue-Book.ec6b9fd.ttf"},267:function(e,t,o){e.exports=o.p+"fonts/MaisonNeue-Demi.c56345a.ttf"},268:function(e,t,o){"use strict";o(194)},269:function(e,t,o){var n=o(52),r=o(144),c=o(270),d=o(271),l=o(272),f=o(273),m=o(274),k=o(275),h=o(276),_=o(277),E=o(278),v=o(279),O=o(280),S=o(281),D=o(282),T=o(283),x=o(284),A=o(285),P=o(286),y=o(287);t=n(!1);var C=r(c),R=r(d),N=r(l),L=r(f),M=r(m),w=r(k),I=r(h),B=r(_),Q=r(E),U=r(v),F=r(O),K=r(S),$=r(D),G=r(T),z=r(x),H=r(A),j=r(P),J=r(y);t.push([e.i,".prog{background-repeat:no-repeat;background-position:50%;background-size:contain}.p-lb-s{background-image:url("+C+")}.p-lb-m{background-image:url("+R+")}.p-lb-e{background-image:url("+N+")}.p-w-s{background-image:url("+L+")}.p-w-m{background-image:url("+M+")}.p-w-e{background-image:url("+w+")}.p-b-s{background-image:url("+I+")}.p-b-m{background-image:url("+B+")}.p-b-e{background-image:url("+Q+")}@media (min-width:768px){.p-lb-s{background-image:url("+U+")}.p-lb-m{background-image:url("+F+")}.p-lb-e{background-image:url("+K+")}.p-w-s{background-image:url("+$+")}.p-w-m{background-image:url("+G+")}.p-w-e{background-image:url("+z+")}.p-b-s{background-image:url("+H+")}.p-b-m{background-image:url("+j+")}.p-b-e{background-image:url("+J+")}}",""]),e.exports=t},270:function(e,t,o){e.exports=o.p+"img/m-progress-light-blue-start.ee3831e.png"},271:function(e,t,o){e.exports=o.p+"img/m-progress-light-blue-mid.8ca8f7e.png"},272:function(e,t,o){e.exports=o.p+"img/m-progress-light-blue-end.eab5c7a.png"},273:function(e,t,o){e.exports=o.p+"img/m-progress-white-start.7644001.png"},274:function(e,t,o){e.exports=o.p+"img/m-progress-white-mid.14eb8a3.png"},275:function(e,t,o){e.exports=o.p+"img/m-progress-white-end.7a1b162.png"},276:function(e,t,o){e.exports=o.p+"img/m-progress-blue-start.c433aae.png"},277:function(e,t,o){e.exports=o.p+"img/m-progress-blue-mid.aea8ce5.png"},278:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAAoCAYAAACrUDmFAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAN5SURBVHgB3Vo9bNNAFH7nuDQp6R9VV9RmdIVQBKILiAikVnTPxtaZiaWjdwYGYKhEhdQKhmRBCJSlQUUVA0gdqBQLiTYCKhWESGgaRKL67OPd2U4cN07S8fwNOd+7d/Z9uvfe3b0Lgf4gvmfWRdYLzKfLuvTzZEE96CKHED2/7il0fHBh/cMsWLGHTCE3sWECJAMB9pJS+35x+Vq5LXMhyDH1LT7OgNz4Y9F/V4vLNwRJhf/ouq6AHdNBfnIckzE1sQYuN4egkJPLEBkgl2xWWKcgmNnaUhgw6XyuBya0UimGJVFaIst8DhGEIDg9Pc3Mg8+PGGPfIWIQBPP5vP0r96Da/F2+EzGSzDNRZpRK5o/is3368+tShEj6fJAQlk4m6cG7tb0IkWSKv4amau3Nz5sHT1ekJ2kkEmJbp5xq0XU7nU5T2UlqjUZ7HQxCzKQgKbO5zolfJbSdk9wrmHFZfdLh14OgA7tQKEgZeBLlsjg+9SPIYd3lgadNsgYSoNHLB4PQeeDhSwj6JG7pnoAMmOvngwHwwJNOJyltHL8CCWCcwURbQJJsaPj8GEgArZEa3ET9YOrQJZACJfE7MEEMLnBr9f0sUdR7IANcH1QH0UVyZHFjd0aNxzdBlrSGM4GDzeDixscZYFTKhFRfgrJm24zEAFH09tp2StZUorfZDvVBd+aKIGkq0T0udZ/BhfVP0ieBQ49LjlnKGVC6oPNEz80ypo5Ia5YdcNbB9ok+CmbZgcA6SMA+0SEq5NpwTTSbxVKJ0N0Eh5hCx0SzEHJ7GAH47iZO3kBUYFmv3ad2FG3u7z5mzJY+2YsHgyOrerhiGIbF64JgLpezK182K7T6bQks+kKWvIsffMzMsrcxb3T9XHF1H9MswutaV9g6ks1pmppIpPBUpMTo2CipVKswTk0Ck5NCp1b/KzpxmaoOMTqaJFw2hTLK9ThQl8s8HS6quN+YckuvznVqah11LrQGOu6+0z/4qR7v8OpHR8ds+OKIvXt4aOrZLOV5pA6CLkgmk4nV63WyA852x+BlQInv80Qbllew3kiliJcDwXQW0URS0lmIOvrzxbdUcvo3mwQ0DdCUAOJxxvvh/QiKNJFP4SkHw8gzFBDN/x7UMVBfw28C74v6RLyizHZ2RnEMW9w0zxQzSeCZhOiQkD7+9rC+3XRIn/EM9FeW/9tzwEw/GirtAAAAAElFTkSuQmCC"},279:function(e,t,o){e.exports=o.p+"img/progress-light-blue-start.e7d4e96.png"},280:function(e,t,o){e.exports=o.p+"img/progress-light-blue-mid.9fe1175.png"},281:function(e,t,o){e.exports=o.p+"img/progress-light-blue-end.f5db89b.png"},282:function(e,t,o){e.exports=o.p+"img/progress-white-start.33fd04c.png"},283:function(e,t,o){e.exports=o.p+"img/progress-white-mid.5f8e0b9.png"},284:function(e,t,o){e.exports=o.p+"img/progress-white-end.d3288c6.png"},285:function(e,t,o){e.exports=o.p+"img/progress-blue-start.943a41b.png"},286:function(e,t,o){e.exports=o.p+"img/progress-blue-mid.dbe89c2.png"},287:function(e,t,o){e.exports=o.p+"img/progress-blue-end.5da4567.png"},288:function(e,t,o){"use strict";o(195)},289:function(e,t,o){var n=o(52),r=o(144),c=o(290),d=o(291);t=n(!1);var l=r(c),f=r(d);t.push([e.i,"@-webkit-keyframes animatedBackground{0%{background-position:0 0}50%{background-position:200% 0}to{background-position:0 0}}@keyframes animatedBackground{0%{background-position:0 0}50%{background-position:200% 0}to{background-position:0 0}}.beach{background:url("+l+");background-repeat:no-repeat;background-position:0 0;background-repeat:repeat-x;-webkit-animation:animatedBackground 60s linear infinite;animation:animatedBackground 60s linear infinite}.bottom-beach{background:url("+f+");background-repeat:no-repeat;background-position:bottom;background-size:contain;z-index:0}",""]),e.exports=t},290:function(e,t,o){e.exports=o.p+"img/beach_top.f6b0e5c.svg"},291:function(e,t,o){e.exports=o.p+"img/beach_bottom.1ffafc8.svg"},292:function(e,t,o){"use strict";o(196)},293:function(e,t,o){(t=o(52)(!1)).push([e.i,'html{font-family:"Maison Neue","Source Sans Pro",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:16px;word-spacing:1px;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;box-sizing:border-box}',""]),e.exports=t},294:function(e,t,o){"use strict";o.r(t),o.d(t,"state",(function(){return k})),o.d(t,"getters",(function(){return h})),o.d(t,"mutations",(function(){return _})),o.d(t,"actions",(function(){return E}));o(118),o(158),o(31),o(50),o(69),o(157),o(154),o(23),o(74),o(15),o(223),o(65),o(44),o(32),o(45);var n=o(209),r=(o(49),o(7)),c=o(206),d=o(62),l=o(48),f=o(64),m=function(e,t){return e.reduce((function(e,o){return(e[o[t]]=e[o[t]]||[]).push(o),e}),{})},k=function(){return{groupType:"individual",adult_no:0,child_no:0,children_ages:[],rooms:[],roomsData:[],policies:[],guest:{},saveForNextTime:!0,guestFormData:{},weHaveData:!1,other_guests:[],guests_done:!1,availability_done:!1,profile_done:!1,policy_done:!1,done_data:{},extra:"",showExtra:!1,specials:["lookout","massage","quadbike","photoshoot","drinks","cake","roomDecoration","domesticStaff"],booking:null,discount:null,lastUpdate:null,editMode:!1,editBooking:null}},h={totalPeople:function(e){return e.adult_no+e.child_no},roomsData:function(e){return e.roomsData},policies:function(e){return e.policies},bookedRooms:function(e){var t=[];return e.rooms.forEach((function(o){var n=e.roomsData.find((function(e){return e.id===o.room_id}));n&&t.push({room_id:o.room_id,name:n.name,type:n.type,date:o.date,price:n.price,single_price:n.single_price,isWeekend:o.isWeekend})})),t},totalRooms:function(e,t){var o=m(t.bookedRooms,"room_id");return Object.keys(o).length},totalNights:function(e,t){var o=m(t.bookedRooms,"date");return Object.keys(o).length},getSpecials:function(e){return e.specials},getBooking:function(e){return e.booking},bookingDates:function(e,t){var o=t.bookedRooms.map((function(e){return e.date}));return Object(c.a)(new Set(o))},roomPrice:function(e,t){return t.bookedRooms.reduce((function(e,o){return"family"==o.type?e+o.price:"standard"==o.type?1==t.totalPeople?e+o.single_price:e+o.price:void 0}),0)},roomDiscountPercent:function(e,t){var o=t.totalNights,n=0;return 2==o?n=5:3==o?n=10:o>=4&&(n=15),n},roomDiscount:function(e,t){return t.roomPrice*(t.roomDiscountPercent/100)},subTotal:function(e,t){var o=t.roomPrice,n=0;return t["extras/allSelected"].forEach((function(e){"cake"==e.type&&(n+=t["extras/cakePrice"]),"drinks"==e.type&&(n+=t["extras/drinksPrice"]),"photoshoot"==e.type&&(n+=t["extras/photoshootPrice"]),"roomDecoration"==e.type&&(n+=t["extras/decorationPrice"]),"domesticStaff"==e.type&&(n+=t["extras/staffPrice"]),"massage"==e.type&&(n+=t["extras/massagePrice"]),"quadbike"==e.type&&(n+=t["extras/quadbikePrice"]),"lookout"==e.type&&(n+=t["extras/lookoutPrice"])})),n+o},discount:function(e,t){var o=e.discount;return o?"voucher"==o.type?o.amount:"discount"==o.type?o.amount/100*t.subTotal:0:0},totalPrice:function(e,t){return t.subTotal-t.discount-t.roomDiscount},differenceToPay:function(e,t){var o=t.totalPrice-e.editBooking.payment.total;return o<0&&(o=0),e.editBooking.previous_change&&(o+=25e3),o}},_={CANCEL_EDIT:function(e){e.editMode=!1,e.editBooking=null},UPDATE_EDIT_MODE:function(e,t){e.editMode=t},SET_EDIT_BOOKINGS:function(e,t){e.editBooking=t},TRANSFORM_EDIT_TO_REAL:function(e,t){var o=t;console.log(t),e.adult_no=o.adult_no,e.child_no=o.child_no;var n=o.full_names;e.other_guests=n,e.guests_done=!0,e.rooms=o.rooms.map((function(e){return{isWeekend:!1,room_id:e.room_id,date:Object(f.a)(Object(l.a)(e.date),"yyyy-MM-dd")}})),e.availability_done=!0,e.guest=o.guest,e.guest.identification=o.guest.id_url,e.guest.dob=Object(f.a)(Object(l.a)(o.guest.dob),"yyyy-MM-dd"),e.profile_done=!0,e.policy_done=!0},UPDATE_EXPIRY:function(e,t){e.lastUpdate=t},UPDATE_GROUP:function(e,t){e.groupType=t.groupType,e.adult_no=t.adult_no,e.child_no=t.child_no,e.children_ages=t.children_ages.map((function(e){return e.age}));for(var o=[],i=0;i<t.adult_no;i++)o.push({first_name:"",last_name:"",type:"adult",num:i+1});for(var n=0;n<t.child_no;n++)o.push({first_name:"",last_name:"",type:"child",num:n+1});e.other_guests=o},UPDATE_DISCOUNT:function(e,t){e.discount=t},UPDATE_GUEST:function(e,t){e.guest=JSON.parse(JSON.stringify(t.guest))},GUEST_WEHAVEDATA:function(e,t){e.weHaveData=t},GUEST_SAVE_DATA:function(e,t){e.saveForNextTime=t},UPDATE_ROOMS:function(e,t){e.rooms=t},REMOVE_ROOM:function(e,t){var o=e.rooms.findIndex((function(e){return t.room_id===e.room_id&&t.date==e.date}));o>-1&&e.rooms.splice(o,1)},UPDATE_ROOMS_DATA:function(e,t){e.roomsData=t},UPDATE_POLICIES:function(e,t){e.policies=t},COMPLETE_GUEST:function(e){return e.guests_done=!0},COMPLETE_AVAILABILITY:function(e){return e.availability_done=!0},COMPLETE_PROFILE:function(e){return e.profile_done=!0},COMPLETE_POLICY:function(e){return e.policy_done=!0},SET_BOOKING:function(e,t){return e.booking=t},RESET_STORE:function(e){if(e.rooms.length>0){var t=e.guest.email,o=Object(d.a)(Object(l.a)(e.rooms[0].date),new Date)+1;e.done_data.email=t||"",e.done_data.days_left=o||0,e.done_data.booking_ref=""}e.groupType="individual",e.adult_no=0,e.child_no=0,e.children_ages=[],e.rooms=[],e.roomsData=[],e.policies=[],e.saveForNextTime||(e.guest={}),e.weHaveData=!1,e.other_guests=[],e.guests_done=!1,e.availability_done=!1,e.profile_done=!1,e.policy_done=!1,e.saveForNextTime=!0,e.discount=null,e.editMode=!1,e.editBooking=null}},E={loadRooms:function(e){var t=e.commit;return this.$axios.get("/rooms").then((function(e){console.log(e.data.data),t("UPDATE_ROOMS_DATA",e.data.data)}))},loadPolicies:function(e){var t=e.commit;this.$axios.get("/policies").then((function(e){console.log(e.data.data),t("UPDATE_POLICIES",e.data.data)}))},confirmGuest:function(e,t){var o=this;return Object(r.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return Object(n.a)(e),r.next=3,o.$axios.post("confirm/guest",{email:t}).then((function(e){return console.log(e),e.data}));case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),r)})))()},saveGuest:function(e,t){var o=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.commit,n.next=3,o.$axios.post("guests",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return console.log(e),e.data.success?(r("UPDATE_GUEST",{guest:e.data.data}),o.app.$toast.success(e.data.message),!0):(o.app.$toast.error(e.data.message),!1)}));case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},createTransaction:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function o(){var n,r,c,d,l,f;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return n=e.state,r=e.getters,console.log(r),c={},n.editMode?(console.log(n.editBooking.previous_change),d=r.differenceToPay,c={method:"Paystack",subtotal:r.subTotal,previousTotal:r.totalPrice,total:d}):c={method:"Paystack",subtotal:r.subTotal,total:r.totalPrice},(l=n.discount)&&("discount"==l.type?c.discount=l.amount:"voucher"==l.type&&(c.voucher=l.amount)),console.log(c),o.prev=7,o.next=10,t.$axios.post("transactions",c);case 10:if(f=o.sent,console.log(f.data),!f.data.success){o.next=14;break}return o.abrupt("return",f.data.reference);case 14:return o.abrupt("return",!1);case 17:return o.prev=17,o.t0=o.catch(7),o.abrupt("return",!1);case 20:case"end":return o.stop()}}),o,null,[[7,17]])})))()},createBooking:function(e,t){var o=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,c,d,l,f,m,k,h,_,E,v,O,S,D;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.state,c=e.rootState,d=e.rootGetters,l=t.trans_ref,f=t.method_ref,m=t.method,k=c.extras,console.log(k,d),h=d["extras/allSelected"].map((function(s){return s.type})),_={extras:h},E={Rooms:d.roomPrice,"Room Discount":"-"+d.roomDiscount},h.includes("cake")&&(_.cake={date:k.dateCake,info:k.selectedCake},E.cake=d["extras/cakePrice"]),h.includes("photoshoot")&&(_.photoshoot={date:k.datePhotoshoot,quantity:k.selectedPhotoshoot},E.photoshoot=d["extras/photoshootPrice"]),h.includes("roomDecoration")&&(_.roomDecoration={date:k.dateDecoration,welcomeNote:k.decorationWelcomeNote,options:k.selectedDecorations.map((function(e){return e.id}))},E.roomDecoration=d["extras/decorationPrice"]),h.includes("drinks")&&(_.drinks={date:k.dateDrink,options:k.selectedDrinks},E.drinks=d["extras/drinksPrice"]),h.includes("domesticStaff")&&(_.domesticStaff={dates:k.dateStaff,info:k.selectedStaff},E.domesticStaff=d["extras/staffPrice"]),h.includes("quadbike")&&(_.quadbike={date:k.dateQuadbike,options:k.selectedQuadbike,quantity:k.selectedQuadbikeQty},E.quadbike=d["extras/quadbikePrice"]),h.includes("massage")&&(_.massage={date:k.dateMassage,options:k.selectedMassage},E.massage=d["extras/massagePrice"]),h.includes("lookout")&&(_.lookout={date:k.dateLookout,packages:k.selectedLookouts},E.lookout=d["extras/lookoutPrice"]),E["Sub Total"]=d.subTotal,console.log(_),v={booking:{full_names:r.other_guests||[],adult_no:r.adult_no,child_no:r.child_no,extra_info:"ex",trans_ref:l,method_ref:f,method:m},booked_rooms:r.rooms,prices:E},r.guest.id&&(v.guest_id=r.guest.id),r.discount&&(v.discount=r.discount),r.editMode&&(v.oldBookingId=r.editBooking.id),console.log(v),console.log(E),n.prev=23,n.next=26,o.$axios.post("bookings",v);case 26:if(O=n.sent,console.log(O.data),!O.data.success){n.next=39;break}return S=O.data.data.booking,console.log(S),n.next=33,o.$axios.post("/book-specials/".concat(S.id),_);case 33:D=n.sent,console.log(D.data),o.app.$toast.success(O.data.message),r.done_data.booking=S,n.next=40;break;case 39:o.app.$toast.error(O.data.message);case 40:return n.abrupt("return",O.data.success);case 43:return n.prev=43,n.t0=n.catch(23),o.app.$toast.error(n.t0),n.abrupt("return",!1);case 47:case"end":return n.stop()}}),n,null,[[23,43]])})))()},loadOldBooking:function(e){var t=e.state,o=e.dispatch,n=e.commit;if(t.editMode){var r=t.editBooking;n("TRANSFORM_EDIT_TO_REAL",r),o("extras/loadOldExtras",r)}else this.app.$toast.info("You are currently not in Edit mode")}}},298:function(e,t,o){"use strict";o.r(t),o.d(t,"state",(function(){return n})),o.d(t,"getters",(function(){return r})),o.d(t,"mutations",(function(){return d})),o.d(t,"actions",(function(){return l}));o(118),o(158),o(31),o(50),o(154),o(23),o(65),o(32);var n=function(){return{specials:[{type:"lookout",name:"Lookout Experience",available:!0,range:"15,000"},{type:"massage",name:"Massage",available:!1,range:"30,000"},{type:"quadbike",name:"Quad Bikes",available:!0,range:"25,000"},{type:"photoshoot",name:"Photoshoot",available:!0,range:"50,000"},{type:"drinks",name:"ca",available:!0,range:"15,000"},{type:"cake",name:"Cake",available:!0,range:"15,000"},{type:"roomDecoration",name:"Room Decoration",available:!0,range:"0"},{type:"domesticStaff",name:"Domestic Staff",available:!0,range:"15,000"}],selected:[],selectedIndex:0,lookoutOptions:[],selectedLookouts:[],dateLookout:null,massageOptions:[],selectedMassage:[],dateMassage:null,quadbikeOptions:[],selectedQuadbike:[],selectedQuadbikeQty:1,dateQuadbike:null,decorationOptions:[],selectedDecorations:[],decorationWelcomeNote:"",dateDecoration:null,staffPrices:[],selectedStaff:{menu:[],type:["nanny"]},dateStaff:[],drinkOptions:[],selectedDrinks:[],dateDrink:null,cakePrices:[],selectedCake:{},dateCake:null,photoshootPrices:[],selectedPhotoshoot:0,datePhotoshoot:null}},r={allSpecials:function(e){return e.specials},allSelected:function(e){return e.selected},allDrinks:function(e){return e.drinkOptions},allDecorations:function(e){return e.decorationOptions},allLookouts:function(e){return e.lookoutOptions},allMassages:function(e){return e.massageOptions},allQuadbikes:function(e){return e.quadbikeOptions},cakePrice:function(e){if(e.selectedCake){var t=15e3,o=2e4;if(console.log("CAKEEEE PRICE"),e.cakePrices){var p=e.cakePrices.find((function(e){return"6inch"==e.name.toLowerCase()}));p&&(t=+p.price);var n=e.cakePrices.find((function(e){return"8inch"==e.name.toLowerCase()}));n&&(o=+n.price)}var r=+e.selectedCake.quantity;r<=0&&(r=1);var c=t;return"6inch"===e.selectedCake.type?(console.log("its six inch"),console.log(t),console.log(r),c=t*r):"8inch"===e.selectedCake.type&&(console.log("its eight inch"),console.log(o),console.log(r),c=o*r),console.log("CAKEEEE PRICE"),console.log(e.selectedCake),console.log(c),c}return 0},drinksPrice:function(e){if(e.selectedDrinks.length<=0)return 0;for(var t=0,o=function(i){var o=e.selectedDrinks[i],n=e.drinkOptions.find((function(e){return e.id==o.id}));n&&(t+=+n.price*+o.qty)},i=0;i<e.selectedDrinks.length;i++)o(i);return t},photoshootPrice:function(e){if(e.selectedPhotoshoot>0){var t=5e4,o=15e3;if(e.photoshootPrices){var p=e.photoshootPrices.find((function(e){return"photographer"==e.name.toLowerCase()}));p&&(t=+p.price);var a=e.photoshootPrices.find((function(e){return"assistant"==e.name.toLowerCase()}));a&&(o=+a.price)}return t+ +e.selectedPhotoshoot*o}return 5e4},decorationPrice:function(e){if(e.selectedDecorations.length<=0)return 0;for(var t=0,i=0;i<e.selectedDecorations.length;i++){var o=e.selectedDecorations[i];o&&(t+=+o.price)}return t},staffPrice:function(e){var t,o=0,n=15e3,r=3e4,c=3e3,d=4e3,l=5e3;if(e.staffPrices){var f=e.staffPrices.find((function(e){return"driver"==e.name.toLowerCase()}));f&&(n=+f.price);var m=e.staffPrices.find((function(e){return"nanny"==e.name.toLowerCase()}));m&&(r=+m.price);var b=e.staffPrices.find((function(e){return"breakfast"==e.name.toLowerCase()}));b&&(c=+b.price);var k=e.staffPrices.find((function(e){return"lunch"==e.name.toLowerCase()}));k&&(d=+k.price);var h=e.staffPrices.find((function(e){return"dinner"==e.name.toLowerCase()}));h&&(l=+h.price)}if(e.selectedStaff.type.length>0){e.selectedStaff.type.includes("nanny")&&(o+=r),e.selectedStaff.type.includes("driver")&&(o+=n);var _=e.selectedStaff.type.length;e.selectedStaff.menu.includes("breakfast")&&(o+=_*c),e.selectedStaff.menu.includes("lunch")&&(o+=_*d),e.selectedStaff.menu.includes("dinner")&&(o+=_*l)}return((null===(t=e.dateStaff)||void 0===t?void 0:t.length)||0)*o},massagePrice:function(e){var t=0,o=e.massageOptions.find((function(t){return t.id==e.selectedMassage}));return o&&(t=o.price),t},quadbikePrice:function(e){var t=0,o=e.quadbikeOptions.find((function(t){return t.id==e.selectedQuadbike}));return o&&(t=o.price),e.selectedQuadbikeQty>1&&(t*=e.selectedQuadbikeQty),t},lookoutPrice:function(e){if(e.selectedLookouts.length<=0)return 0;for(var t=0,o=function(i){var o=e.selectedLookouts[i],n=e.lookoutOptions.find((function(e){return e.id==o}));n&&(t+=n.price)},i=0;i<e.selectedLookouts.length;i++)o(i);return t}};function c(e,t){var o=e.find((function(s){return s.type==t}));return o||null}var d={LOAD_EXTRAS:function(e,t){e.specials=t},LOAD_SELECTED:function(e,t){e.selected=t},REMOVE_EXTRA:function(e,t){console.log(t);var o=e.selected.findIndex((function(e){return e.type===t}));o>=0&&e.selected.splice(o,1)},ADD_SELECTED:function(e,t){e.selected.push(t)},REMOVE_SELECTED:function(e,t){var o=e.selected.findIndex((function(s){return s.type==t.type}));o>=0&&e.selected.splice(o,1)},EMPTY_SELECTED:function(e,t){e.selected=[]},RESET_INDEX:function(e){return e.selectedIndex=0},INC_INDEX:function(e){return e.selectedIndex++},DEC_INDEX:function(e){return e.selectedIndex--},LOAD_LOOKOUT_OPTIONS:function(e,t){e.lookoutOptions=t},SET_SELECTED_LOOKOUT:function(e,t){e.selectedLookouts=t.lookouts,e.dateLookout=t.date},LOAD_MASSAGE_OPTIONS:function(e,t){e.massageOptions=t},SET_SELECTED_MASSAGE:function(e,t){e.selectedMassage=t.massage,e.dateMassage=t.date},LOAD_QUADBIKE_OPTIONS:function(e,t){e.quadbikeOptions=t},SET_SELECTED_QUADBIKE:function(e,t){e.selectedQuadbike=t.quadbike,e.selectedQuadbikeQty=t.quantity||1,e.dateQuadbike=t.date},LOAD_DECORATION_OPTIONS:function(e,t){e.decorationOptions=t},SET_SELECTED_DECORATION:function(e,t){e.selectedDecorations=t.decorations,e.dateDecoration=t.date,e.decorationWelcomeNote=t.note},SET_SELECTED_STAFF:function(e,t){e.selectedStaff=t.selectedStaff,e.dateStaff=t.dates},LOAD_DRINK_OPTIONS:function(e,t){e.drinkOptions=t},SET_SELECTED_DRINKS:function(e,t){e.selectedDrinks=t.drinks,e.dateDrink=t.date},SET_SELECTED_CAKE:function(e,t){e.selectedCake=t.cake,e.dateCake=t.date},SET_SELECTED_PHOTOSHOOT:function(e,t){e.selectedPhotoshoot=t.num,e.datePhotoshoot=t.date},SET_MOST_PRICES:function(e,t){e.cakePrices=t.cake,e.photoshootPrices=t.photoshoot,e.staffPrices=t.domesticStaff},RESET_STORE:function(e){e.selected=[],e.selectedIndex=0,e.lookoutOptions=[],e.selectedLookouts=[],e.dateLookout=null,e.massageOptions=[],e.selectedMassage=[],e.dateMassage=null,e.quadbikeOptions=[],e.selectedQuadbike=[],e.selectedQuadbikeQty=1,e.dateQuadbike=null,e.decorationOptions=[],e.selectedDecorations=[],e.dateDecoration=null,e.decorationWelcomeNote="",e.selectedStaff={menu:[],type:[]},e.dateStaff=[],e.drinkOptions=[],e.selectedDrinks=[],e.dateDrink=null,e.selectedCake={},e.dateCake=null,e.selectedPhotoshoot=0,e.datePhotoshoot=null},TRANSFORM_CAKE:function(e,t){var o=t.dates,n=t.cake;e.selectedCake=n.data,o.includes(n.date)&&(e.dateCake=n.date)},TRANSFORM_DECORATION:function(e,t){var o=t.dates,n=t.decos;e.selectedDecorations=[],n.forEach((function(t){o.includes(t.date)&&(e.dateDecoration=t.date),t.note&&(e.decorationWelcomeNote=t.note);var option=e.decorationOptions.find((function(e){return e.id==t.option_id}));option&&e.selectedDecorations.push(option)}))},TRANSFORM_DRINKS:function(e,t){var o=t.dates,n=t.drinks;e.selectedDrinks=[],n.forEach((function(t){o.includes(t.date)&&(e.dateDrink=t.date),e.selectedDrinks.push({id:t.option_id,qty:t.quantity})}))},TRANSFORM_PHOTOSHOOT:function(e,t){var o=t.dates,n=t.photoshoot;e.selectedPhotoshoot=n.quantity,o.includes(n.date)&&(e.datePhotoshoot=n.date)},TRANSFORM_STAFF:function(e,t){var o=t.dates,n=t.staff;console.log(n),e.dateStaff=[],n.dates.forEach((function(t){o.includes(t)&&e.dateStaff.push(t)})),e.selectedStaff.menu=n.data.menu,e.selectedStaff.type=n.data.type},TRANSFORM_QUADBIKE:function(e,t){var o=t.dates,n=t.quadbike;console.log(n),o.includes(n.date)&&(e.dateQuadbike=n.date,e.selectedQuadbike=n.option_id,e.selectedQuadbikeQty=n.quantity)},TRANSFORM_MASSAGE:function(e,t){var o=t.dates,n=t.massage;console.log(n),o.includes(n.date)&&(e.dateMassage=n.date,e.selectedMassage=n.slot_id)},TRANSFORM_LOOKOUTS:function(e,t){var o=t.dates,n=t.lookouts;e.selectedLookouts=[];var r=[];n.forEach((function(t){o.includes(t.date)&&(console.log("----------"),console.log(t),e.dateLookout=t.date,r.push(t.package_id))})),e.selectedLookouts=r,console.log(e.selectedLookouts)}},l={updateSpecials:function(e,t){var o=e.commit,n=e.rootState,r=null;n.editMode&&n.editBooking&&(r=n.editBooking.id),this.$axios.post("/extras",{dates:t,oldBookingId:r}).then((function(e){console.log("EXTRASSS"),console.log(e.data),o("LOAD_EXTRAS",e.data)}))},getSpecialDrinks:function(e){var t=e.commit;this.$axios.get("/drink-options").then((function(e){console.log("Drinks"),console.log(e.data.data),t("LOAD_DRINK_OPTIONS",e.data.data)}))},getSpecialDecorations:function(e){var t=e.commit;this.$axios.get("/decoration-options").then((function(e){console.log("Decorations"),console.log(e.data.data),t("LOAD_DECORATION_OPTIONS",e.data.data)}))},getSpecialMassages:function(e){var t=e.commit;this.$axios.get("/massage-options").then((function(e){console.log("Massages"),console.log(e.data.data),t("LOAD_MASSAGE_OPTIONS",e.data.data)}))},getLookoutOptions:function(e){var t=e.commit;this.$axios.get("/lookout-options").then((function(e){console.log("Lookout options"),console.log(e.data.data),t("LOAD_LOOKOUT_OPTIONS",e.data.data)}))},getQuadbikeOptions:function(e){var t=e.commit;this.$axios.get("/quadbike-options").then((function(e){console.log("Quadbike options"),console.log(e.data.data),t("LOAD_QUADBIKE_OPTIONS",e.data.data)}))},getMostPrices:function(e){var t=e.commit;this.$axios.get("/prices/most").then((function(e){console.log("Most prices"),console.log(e.data.data),t("SET_MOST_PRICES",e.data.data)}))},loadOldExtras:function(e,t){var o=e.commit,n=e.state,r=e.rootGetters;console.log("YESSS EXTRASS OLD BOOKING"),o("EMPTY_SELECTED");var d=r.bookingDates;if(t.massage){var s=c(n.specials,"massage");s&&(o("ADD_SELECTED",s),o("TRANSFORM_MASSAGE",{massage:t.massage,dates:d}))}if(t.quadbike){var l=c(n.specials,"quadbike");l&&(o("ADD_SELECTED",l),o("TRANSFORM_QUADBIKE",{quadbike:t.quadbike,dates:d}))}if(t.lookouts){var f=c(n.specials,"lookout");f&&(o("ADD_SELECTED",f),o("TRANSFORM_LOOKOUTS",{lookouts:t.lookouts,dates:d}))}if(t.cake){var m=c(n.specials,"cake");m&&(o("ADD_SELECTED",m),o("TRANSFORM_CAKE",{cake:t.cake,dates:d}))}if(t.drinks){var k=c(n.specials,"drinks");k&&(o("ADD_SELECTED",k),o("TRANSFORM_DRINKS",{drinks:t.drinks,dates:d}))}if(t.photoshoot){var h=c(n.specials,"photoshoot");h&&(o("ADD_SELECTED",h),o("TRANSFORM_PHOTOSHOOT",{photoshoot:t.photoshoot,dates:d}))}if(t.decorations){var _=c(n.specials,"roomDecoration");_&&(o("ADD_SELECTED",_),o("TRANSFORM_DECORATION",{decos:t.decorations,dates:d}))}if(t.domestic_staff){var E=c(n.specials,"domesticStaff");E&&(o("ADD_SELECTED",E),o("TRANSFORM_STAFF",{staff:t.domestic_staff,dates:d}))}}}},321:function(e,t,o){"use strict";o.r(t);var n={methods:{cancelEdit:function(){this.$router.push({path:"/guests"}),this.$store.commit("CANCEL_EDIT"),this.$store.commit("RESET_STORE"),this.$store.commit("extras/RESET_STORE")}}},r=o(17),component=Object(r.a)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"fixed top-0 z-50 w-full py-2 text-center bg-green-200"},[e._v("\n    You are currently editting a booking "),o("b",[e._v("#"+e._s(e.$store.state.editBooking.ref))]),e._v(" "),o("button",{staticClass:"ml-6 text-red-700",on:{click:function(t){return e.cancelEdit()}}},[e._v("CANCEL")])])}),[],!1,null,null,null);t.default=component.exports}},[[224,15,1,16]]]);