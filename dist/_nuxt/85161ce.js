(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{439:function(t,e,o){o(440)},440:function(t,e,o){"use strict";var n=o(4),r=o(26),l=o(190),d=o(281),c=o(23);n({target:"Promise",stat:!0},{allSettled:function(t){var e=this,o=l.f(e),n=o.resolve,f=o.reject,v=d((function(){var o=r(e.resolve),l=[],d=0,f=1;c(t,(function(t){var r=d++,c=!1;l.push(void 0),f++,o.call(e,t).then((function(t){c||(c=!0,l[r]={status:"fulfilled",value:t},--f||n(l))}),(function(t){c||(c=!0,l[r]={status:"rejected",reason:t},--f||n(l))}))})),--f||n(l)}));return v.error&&f(v.value),o.promise}})},455:function(t,e,o){"use strict";o.r(e);var n=o(8),r=(o(36),o(53),o(54),o(19),o(9),o(439),o(16),o(17),o(37),o(31),o(50),o(43),o(64),o(5)),l=o.n(r),d=o(0),c=o.n(d),f={layout:"booking",data:function(){return{booking_ref:"",last_name:"",loading:!1,fullBooking:null,admin_mode:!1}},computed:{rooms:function(){return this.$store.getters.roomsData},totalNights:function(){return this.fullBooking?Object.keys((t=this.fullBooking.rooms,e="date",t.reduce((function(t,o){return(t[o[e]]=t[o[e]]||[]).push(o),t}),{}))).length:0;var t,e}},methods:{roomName:function(t){var e=this.rooms.find((function(e){return e.id==t}));return e?e.name:"Room"},findBooking:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$axios.post("bookings/manage",{booking_ref:t.booking_ref,last_name:t.last_name}).then((function(e){var o=e.data;o.success?(t.$toast.success(o.message),t.fullBooking=o.data):t.$toast.error(o.message),console.log(e)})).finally((function(){t.loading=!1}));case 3:case"end":return e.stop()}}),e)})))()},loadOldBooking:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.commit("SET_EDIT_BOOKINGS",t.fullBooking),t.$store.commit("UPDATE_EDIT_MODE",!0),e.next=4,t.$store.dispatch("loadRooms");case 4:return e.next=6,Promise.allSettled([t.$store.dispatch("loadRooms"),t.$store.dispatch("loadPolicies"),t.$store.dispatch("extras/getSpecialDrinks"),t.$store.dispatch("extras/getSpecialCakes"),t.$store.dispatch("extras/getSpecialDecorations"),t.$store.dispatch("extras/getLookoutOptions"),t.$store.dispatch("extras/getSpecialMassages"),t.$store.dispatch("extras/getSpecialNewmassages"),t.$store.dispatch("extras/getQuadbikeOptions"),t.$store.dispatch("extras/getMostPrices")]);case 6:t.$store.dispatch("loadOldBooking"),t.$router.push({path:"/availability"});case 8:case"end":return e.stop()}}),e)})))()},gotoBack:function(){this.$router.push({path:"/guests"})},currency:function(t){return"â‚¦"+t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},sentenceCase:function(text){var t=text.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)},formatDate:function(t){return l()(c()(t),"do MMM  Y")}},mounted:function(){var t=this;console.log(this.$route.query),this.$route.query.ref&&this.$route.query.name&&this.$route.query.admin&&(this.booking_ref=this.$route.query.ref,this.last_name=this.$route.query.name,this.admin_mode=1==this.$route.query.admin,this.$store.commit("TOGGLE_FULL_PAGE_LOADER",!0),this.$store.commit("RESET_STORE"),setTimeout((function(){t.$store.commit("UPDATE_ADMIN_EDIT_MODE",t.admin_mode),t.findBooking().then((function(){t.loadOldBooking()}))}),1e3))}},v=o(1),component=Object(v.a)(f,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"text-xl font-bold text-center md:text-2xl"},[t._v("\n        Manage your booking\n    ")]),t._v(" "),o("div",{staticClass:"flex flex-col justify-center mt-10 mb-20 md:space-x-6 md:flex-row"},[o("div",{staticClass:"order-last w-full max-w-md mt-10 md:mt-0 md:order-none md:w-1/3"},[o("form",{staticClass:"flex-shrink-0 block w-full px-6 py-6 bg-white border rounded-lg shadow-lg",on:{submit:function(e){return e.preventDefault(),t.findBooking()}}},[o("div",{staticClass:"border rounded-lg"},[o("div",{staticClass:"p-4"},[o("div",{staticClass:"mb-4 font-semibold"},[t._v("Booking Reference")]),t._v(" "),o("div",{staticClass:"flex items-center pl-2 space-x-2 rounded-md focus-within:ring"},[o("svg",{staticClass:"w-6 h-6",attrs:{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[o("path",{attrs:{d:"M12.1875 7.5A2.3444 2.3444 0 0114.14 5.1875a.46804.46804 0 00.2803-.15919.46741.46741 0 00.1109-.30269V3.28125a.93747.93747 0 00-.2745-.66291.93767.93767 0 00-.6629-.27459H1.40625a.93749.93749 0 00-.9375.9375v1.44563A.46813.46813 0 00.86 5.18875a2.34435 2.34435 0 011.9591 2.3125A2.34437 2.34437 0 01.86 9.81375a.46876.46876 0 00-.39125.46185v1.4432c0 .2486.09877.487.27459.6629a.93748.93748 0 00.66291.2745H13.5938c.2486 0 .487-.0987.6629-.2745a.93767.93767 0 00.2745-.6629v-1.4457a.4674.4674 0 00-.1109-.30266.46804.46804 0 00-.2803-.15919 2.34443 2.34443 0 01-1.399-.79849A2.34412 2.34412 0 0112.1875 7.5v0zM7.5 5.625h3.2812",stroke:"#225A89","stroke-width":".8","stroke-linecap":"round","stroke-linejoin":"round"}}),t._v(" "),o("path",{attrs:{d:"M9.60938 10.3125c.64722 0 1.17182-.52467 1.17182-1.17188 0-.6472-.5246-1.17187-1.17182-1.17187-.64721 0-1.17188.52467-1.17188 1.17187 0 .64721.52467 1.17188 1.17188 1.17188zM4.6875 4.92188a.23444.23444 0 01.14468-.21654.23441.23441 0 01.25542.05081.2344.2344 0 01.05081.25542.2344.2344 0 01-.21653.14468.23433.23433 0 01-.16573-.06865.23433.23433 0 01-.06865-.16572M4.6875 7.73437a.23443.23443 0 01.14468-.21653.23441.23441 0 01.25542.05081.2344.2344 0 01.05081.25542.2344.2344 0 01-.21653.14468.23433.23433 0 01-.16573-.06865.23433.23433 0 01-.06865-.16573zM4.6875 10.5469a.23457.23457 0 01.14468-.2166.23453.23453 0 01.25542.0508.23465.23465 0 01.06415.1201.23446.23446 0 01-.01334.1354.23482.23482 0 01-.08632.1052.23473.23473 0 01-.13021.0394.23412.23412 0 01-.16573-.0686.23447.23447 0 01-.06865-.1657z",stroke:"#225A89","stroke-width":".8","stroke-linecap":"round","stroke-linejoin":"round"}})]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.booking_ref,expression:"booking_ref"}],staticClass:"w-full px-0 border-0 border-transparent rounded-md",staticStyle:{"box-shadow":"none"},attrs:{type:"text",required:"",placeholder:"34ERBUI1"},domProps:{value:t.booking_ref},on:{input:function(e){e.target.composing||(t.booking_ref=e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"p-4 border-t"},[o("div",{staticClass:"mb-4 font-semibold"},[t._v("Last Name")]),t._v(" "),o("div",{staticClass:"flex items-center pl-2 space-x-2 rounded-md focus-within:ring"},[o("svg",{staticClass:"w-6 h-6",attrs:{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[o("path",{attrs:{d:"M13.4221 14.5312a6.55244 6.55244 0 00-2.4175-2.7337 6.5535 6.5535 0 00-3.50495-1.0163 6.55326 6.55326 0 00-3.50492 1.0163 6.55215 6.55215 0 00-2.41758 2.7337M7.5 3.28125A3.28189 3.28189 0 014.21875 6.5625c0 .87024.3457 1.70484.96106 2.32019A3.28121 3.28121 0 0010.7812 6.5625a3.28119 3.28119 0 01-2.32014-.96106A3.28121 3.28121 0 017.5 3.28125v0z",stroke:"#225A89","stroke-width":".8","stroke-linecap":"round","stroke-linejoin":"round"}}),t._v(" "),o("path",{attrs:{d:"M11.1473 11.8919a9.11006 9.11006 0 002.1193-.6294.93767.93767 0 00.4894-.5152.93758.93758 0 00-.0125-.7104l-.86-2.00628a2.8125 2.8125 0 01-.2275-1.10812V5.625A5.15617 5.15617 0 007.49976.46875 5.15627 5.15627 0 002.34351 5.625v1.2975a2.8125 2.8125 0 01-.2275 1.10812l-.86 2.00628a.9374.9374 0 00-.01252.7104.93765.93765 0 00.48939.5152 9.10925 9.10925 0 002.11938.6294",stroke:"#225A89","stroke-width":".8","stroke-linecap":"round","stroke-linejoin":"round"}})]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.last_name,expression:"last_name"}],staticClass:"w-full px-0 border-0 border-transparent rounded-md",staticStyle:{"box-shadow":"none"},attrs:{type:"text",required:"",placeholder:"Okpala"},domProps:{value:t.last_name},on:{input:function(e){e.target.composing||(t.last_name=e.target.value)}}})])])]),t._v(" "),o("div",{staticClass:"flex w-full mt-6 space-x-3"},[o("MainButton",{attrs:{type:"button",outline:""},on:{click:function(e){return t.gotoBack()}}},[t._v("Back")]),t._v(" "),o("MainButton",{attrs:{loading:t.loading}},[t._v("\n                        Find Booking\n                    ")])],1)])]),t._v(" "),t.fullBooking?o("div",{staticClass:"w-full px-4 md:px-0 md:w-1/3"},[o("div",{staticClass:"mx-auto mt-6 mb-6 text-gray-800 border rounded-md border-brand-blue-300 bg-brand-blue-100"},[o("div",{staticClass:"px-3 py-3 text-xl font-bold border-b border-brand-blue-300"},[t._v("Your Booking")]),t._v(" "),o("div",{staticClass:"flex items-center justify-between px-3 my-3"},[o("div",[t._v("Booking Ref")]),t._v(" "),o("div",{staticClass:"font-bold"},[t._v("\n                        #"+t._s(t.fullBooking.ref)+"\n                    ")])]),t._v(" "),o("div",{staticClass:"flex items-center justify-between px-3 my-3"},[o("div",[t._v("Number of Nights")]),t._v(" "),o("div",{staticClass:"font-bold"},[t._v("\n                        "+t._s(t.totalNights)+" Night"),t.totalNights>1?o("span",[t._v("s")]):t._e()])]),t._v(" "),o("div",{staticClass:"flex items-start justify-between px-3 my-3"},[o("div",[t._v("Room(s)")]),t._v(" "),o("div",{staticClass:"font-bold"},t._l(t.fullBooking.rooms,(function(e,n){return o("div",{key:n,staticClass:"mb-1 text-right"},[o("div",[t._v(t._s(t.formatDate(e.date)))]),t._v(" "),o("div",{staticClass:"text-xs text-gray-600"},[t._v(t._s(t.roomName(e.room_id)))])])})),0)]),t._v(" "),t.fullBooking.cakes[0]?o("div",{staticClass:"flex items-center justify-between px-3 my-3"},[o("div",[t._v("Cakes")]),t._v(" "),o("div",{staticClass:"font-bold"},[t._v("\n                        "+t._s(t.formatDate(t.fullBooking.cakes[0].date))+"\n                    ")])]):t._e(),t._v(" "),t.fullBooking.photoshoot?o("div",{staticClass:"flex items-center justify-between px-3 my-3"},[o("div",[t._v("Photoshoot")]),t._v(" "),o("div",{staticClass:"font-bold"},[t._v("\n                        "+t._s(t.formatDate(t.fullBooking.photoshoot.date))+"\n                    ")])]):t._e(),t._v(" "),t.fullBooking.drinks[0]?o("div",{staticClass:"flex items-center justify-between px-3 my-3"},[o("div",[t._v("Drinks")]),t._v(" "),o("div",{staticClass:"font-bold"},[t._v("\n                        "+t._s(t.formatDate(t.fullBooking.drinks[0].date))+"\n                    ")])]):t._e(),t._v(" "),t.fullBooking.decorations[0]?o("div",{staticClass:"flex items-center justify-between px-3 my-3"},[o("div",[t._v("Decorations")]),t._v(" "),o("div",{staticClass:"font-bold"},[t._v("\n                        "+t._s(t.formatDate(t.fullBooking.decorations[0].date))+"\n                    ")])]):t._e(),t._v(" "),t.fullBooking.domestic_staff?o("div",{staticClass:"flex items-start justify-between px-3 my-3"},[o("div",[t._v("Domestic Staff")]),t._v(" "),o("div",{staticClass:"flex flex-col items-end justify-end font-bold"},t._l(t.fullBooking.domestic_staff.dates,(function(e,n){return o("div",{key:"d"+n},[t._v("\n                            "+t._s(t.formatDate(e))+"\n                        ")])})),0)]):t._e(),t._v(" "),t.fullBooking.new_massage?o("div",{staticClass:"flex items-center justify-between px-3 my-3"},[o("div",[t._v("Massage")]),t._v(" "),o("div",{staticClass:"font-bold"},[t._v("\n                        "+t._s(t.formatDate(t.fullBooking.new_massage.date))+"\n                    ")])]):t._e(),t._v(" "),t.fullBooking.quadbike?o("div",{staticClass:"flex items-center justify-between px-3 my-3"},[o("div",[t._v("Quad Bikes")]),t._v(" "),o("div",{staticClass:"font-bold"},[t._v("\n                        "+t._s(t.formatDate(t.fullBooking.quadbike.date))+"\n                    ")])]):t._e(),t._v(" "),t.fullBooking.lookouts[0]?o("div",{staticClass:"flex items-center justify-between px-3 my-3"},[o("div",[t._v("Dining Experience")]),t._v(" "),o("div",{staticClass:"font-bold"},[t._v("\n                        "+t._s(t.formatDate(t.fullBooking.lookouts[0].date))+"\n                    ")])]):t._e()]),t._v(" "),"pending"==t.fullBooking.payment.status?o("button",{staticClass:"w-full px-4 py-2 font-bold text-gray-500 border border-gray-400 rounded-lg cursor-not-allowed focus:ring-2 ring-offset-1 ring-gray-400 hover:border-gray-500 focus:outline-none",attrs:{disabled:""}},[t._v("UNPAID")]):o("MainButton",{on:{click:function(e){return t.loadOldBooking()}}},[t._v("Update Booking")])],1):t._e()])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{MainButton:o(25).default})}}]);